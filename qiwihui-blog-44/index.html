<!DOCTYPE html><html lang><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Cocoapods 和 Carthage 使用笔记 · QIWIHUI</title><meta name="description" content="Cocoapods 和 Carthage 使用笔记 - qiwihui"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/nella.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.12/css/all.css" integrity="sha384-G0fIWCsCzJIMAVNQPfjH08cyYaUtMwjJwqiRKxxE/rx96Uroj1BtIQ6MLJuheaO9" crossorigin="anonymous"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
google_ad_client: "ca-pub-8935595858652656",
enable_page_level_ads: true
});
</script><link rel="search" type="application/opensearchdescription+xml" href="https://qiwihui.com/atom.xml" title="QIWIHUI"><script src="//code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/images/avatar.jpg" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">HOME</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item"><a href="/links/" target="_self" class="nav-list-link">LINKS</a></li><!--li.nav-list-item--><!--    a.nav-list-link(class="search" href=url_for("search") target="_self") SEARCH--></ul></header><main class="container"></main><div class="post"><article class="post-block"><h1 class="post-title">Cocoapods 和 Carthage 使用笔记</h1><div class="post-info">Dec 26, 2018<span class="categories"><i class="fa fa-bookmark" aria-hidden="true"></i></span><a href="/categories/技术/" class="post-category">#技术</a><span>8 min. read</span></div><div class="post-content"><h2>Carthage 和 CoaoaPods 的区别</h2>
<p><code>CoaoaPods</code> 是一套整体解决方案，我们在 <code>Podfile</code> 中指定好我们需要的第三方库。然后 <code>CocoaPods</code> 就会进行下载，集成，然后修改或者创建我们项目的 <code>workspace</code> 文件，这一系列整体操作。</p>
<p>相比之下，<code>Carthage</code> 就要轻量很多，它也会一个叫做 <code>Cartfile</code> 描述文件，但 <code>Carthage</code> 不会对我们的项目结构进行任何修改，更不多创建 <code>workspace</code>。它只是根据我们描述文件中配置的第三方库，将他们下载到本地，然后使用 <code>xcodebuild</code> 构建成 <code>framework</code> 文件。然后由我们自己将这些库集成到项目中。<code>Carthage</code> 使用的是一种<strong>非侵入性</strong>的哲学。</p>
<p>另外 <code>Carthage</code> 除了非侵入性，它还是去中心化的，它的包管理不像 <code>CocoaPods</code> 那样，有一个中心服务器(<a href="http://cocoapods.org" target="_blank" rel="noopener">cocoapods.org</a>)，来管理各个包的元信息，而是依赖于每个第三方库自己的源地址，比如 Github。</p>
<a id="more"></a>
<h2>Cocoapods</h2>
<h3>安装</h3>
<ol>
<li>
<p>（可选）使用 <del>taobao</del> ruby-china 源替换默认 gem 源: <code>gem source blabla..</code></p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ gem sources -l</span><br><span class="line">*** CURRENT SOURCES ***</span><br><span class="line"></span><br><span class="line">https://rubygems.org/</span><br><span class="line"></span><br><span class="line">$ gem sources --remove https://rubygems.org/</span><br><span class="line">https://ruby.taobao.org/ removed from sources</span><br><span class="line"></span><br><span class="line">$ gem <span class="built_in">source</span> -a https://gems.ruby-china.com/</span><br><span class="line">https://gems.ruby-china.com/ added to sources</span><br><span class="line"></span><br><span class="line">$ gem <span class="built_in">source</span> -c</span><br><span class="line">*** Removed specs cache ***</span><br><span class="line"></span><br><span class="line">$ gem <span class="built_in">source</span> -u</span><br><span class="line"><span class="built_in">source</span> cache successfully updated</span><br><span class="line"></span><br><span class="line">$ gem sources -l</span><br><span class="line">*** CURRENT SOURCES ***</span><br><span class="line"></span><br><span class="line">https://gems.ruby-china.com/</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>sudo gem install cocoapods</code></p>
</li>
<li>
<p>（可选）切换 pod 源</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ pod repo</span><br><span class="line"></span><br><span class="line">master</span><br><span class="line">- Type: git (master)</span><br><span class="line">- URL:  https://github.com/CocoaPods/Specs.git</span><br><span class="line">- Path: /Users/qiwihui/.cocoapods/repos/master</span><br><span class="line"></span><br><span class="line">$ pod repo remove master</span><br><span class="line"></span><br><span class="line">$ pod repo add master https://git.coding.net/CocoaPods/Specs.git</span><br><span class="line"></span><br><span class="line">$ pod repo update</span><br><span class="line"></span><br><span class="line">$ pod setup</span><br></pre></td></tr></table></figure>
</li>
</ol>
<pre><code>或者

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://git.coding.net/CocoaPods/Specs.git ~/.cocoapods/repos/master</span><br><span class="line">$ pod repo update</span><br></pre></td></tr></table></figure>


切换回官方镜像

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ pod repo remove master</span><br><span class="line"></span><br><span class="line">$ pod repo add master https://github.com/CocoaPods/Specs.git</span><br><span class="line"></span><br><span class="line">$ pod repo update</span><br><span class="line">Updating spec repo `master`</span><br><span class="line">  $ /usr/<span class="built_in">local</span>/bin/git -C /Users/qiwihui/.cocoapods/repos/master fetch origin --progress</span><br><span class="line">  remote: Enumerating objects: 511, <span class="keyword">done</span>.        </span><br><span class="line">  remote: Counting objects: 100% (511/511), <span class="keyword">done</span>.        </span><br><span class="line">  remote: Compressing objects: 100% (134/134), <span class="keyword">done</span>.        </span><br><span class="line">  remote: Total 820 (delta 399), reused 449 (delta 367), pack-reused 309        </span><br><span class="line">  Receiving objects: 100% (820/820), 99.24 KiB | 401.00 KiB/s, <span class="keyword">done</span>.</span><br><span class="line">  Resolving deltas: 100% (501/501), completed with 194 <span class="built_in">local</span> objects.</span><br><span class="line">  From https://github.com/CocoaPods/Specs</span><br><span class="line">     5b04790953c..e3ba7ee3a29  master     -&gt; origin/master</span><br><span class="line">  $ /usr/<span class="built_in">local</span>/bin/git -C /Users/qiwihui/.cocoapods/repos/master rev-parse --abbrev-ref HEAD</span><br><span class="line">  master</span><br><span class="line">  $ /usr/<span class="built_in">local</span>/bin/git -C /Users/qiwihui/.cocoapods/repos/master reset --hard origin/master</span><br><span class="line">  HEAD is now at e3ba7ee3a29 [Add] IOS_OC_BASIC 6.3</span><br><span class="line"></span><br><span class="line">CocoaPods 1.6.0.beta.2 is available.</span><br><span class="line">To update use: `sudo gem install cocoapods --pre`</span><br><span class="line">[!] This is a <span class="built_in">test</span> version we<span class="string">'d love you to try.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">For more information, see https://blog.cocoapods.org and the CHANGELOG for this version at https://github.com/CocoaPods/CocoaPods/releases/tag/1.6.0.beta.2</span></span><br></pre></td></tr></table></figure>
</code></pre>
<ol start="4">
<li>
<p>如果Podfile文件中有</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">source &apos;https://github.com/CocoaPods/Specs.git&apos;</span><br></pre></td></tr></table></figure>
<p>也需要把它换成repo的源，否则依然是使用GitHub源</p>
</li>
</ol>
<h3>基础用法</h3>
<ol start="0">
<li>
<p><code>cd &lt;project_folder&gt;</code></p>
</li>
<li>
<p><code>pod init</code></p>
</li>
<li>
<p>编辑 Podfile, example</p>
 <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 平台，必需</span><br><span class="line">platform :ios, &apos;9.0&apos;</span><br><span class="line"># 隐藏警告</span><br><span class="line">inhibit_all_warnings!</span><br><span class="line"></span><br><span class="line">target &apos;AlamofireDemo&apos; do</span><br><span class="line">    # Using Swift and want to use dynamic frameworks</span><br><span class="line">    use_frameworks!</span><br><span class="line"></span><br><span class="line">    # 项目 Pods</span><br><span class="line">    pod &apos;Alamofire&apos;, &apos;~&gt; 4.5&apos;</span><br><span class="line"></span><br><span class="line">    target &apos;AlamofireDemoTests&apos; do</span><br><span class="line">        inherit! :search_paths</span><br><span class="line">        # 测试 Pods</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure>
</li>
</ol>
<pre><code>版本支持：
    - `&gt;`, `&gt;=`, `&lt;`, `&lt;=`
    - `~&gt;`: **up to** next major | minor | patch
    - `:path` 本地绝对路径
    - `:git` git项目地址，还可使用 `:branch`, `:tag`, `:commit`
</code></pre>
<ol start="3">
<li><code>pod install</code></li>
<li><strong>Always</strong> 打开项目下 *.xcworkspace 文件作为项目入口</li>
</ol>
<h3>pod install 和 pod update 区别</h3>
<ul>
<li><code>pod install [package_name]</code>: 安装特定版本的 pods</li>
<li><code>pod update [package_name]</code>: 升级 pods 到最新版本</li>
</ul>
<h2>Carthage</h2>
<h3>安装</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew install carthage</span><br></pre></td></tr></table></figure>
<h3>使用</h3>
<ol>
<li>
<p>编辑 <code>Cartfile</code>，比如 <code>SwiftyJSON</code></p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">github <span class="string">"SwiftyJSON/SwiftyJSON"</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>carthage update [–platform ios]</p>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ carthage update</span><br><span class="line">*** Fetching SwiftyJSON</span><br><span class="line">*** Checking out SwiftyJSON at <span class="string">"4.2.0"</span></span><br><span class="line">*** xcodebuild output can be found <span class="keyword">in</span> /var/folders/kl/g94q0k_571vdjtcwzzcv20s40000gn/T/carthage-xcodebuild.nN22hg.log</span><br><span class="line">*** Building scheme <span class="string">"SwiftyJSON iOS"</span> <span class="keyword">in</span> SwiftyJSON.xcworkspace</span><br><span class="line">*** Building scheme <span class="string">"SwiftyJSON watchOS"</span> <span class="keyword">in</span> SwiftyJSON.xcworkspace</span><br><span class="line">*** Building scheme <span class="string">"SwiftyJSON tvOS"</span> <span class="keyword">in</span> SwiftyJSON.xcworkspace</span><br><span class="line">*** Building scheme <span class="string">"SwiftyJSON macOS"</span> <span class="keyword">in</span> SwiftyJSON.xcworkspace</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>Carthage</code> 目录下：</p>
<ul>
<li>Build(编译出来的.framework二进制代码库)</li>
<li>Checkouts(源码)</li>
</ul>
 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ tree -L 3 Carthage/</span><br><span class="line">Carthage/</span><br><span class="line">├── Build</span><br><span class="line">│   ├── Mac</span><br><span class="line">│   │   ├── SwiftyJSON.framework</span><br><span class="line">│   │   └── SwiftyJSON.framework.dSYM</span><br><span class="line">│   ├── iOS</span><br><span class="line">│   │   ├── 22BD4B6C-0B26-35E1-AF5F-8FB6AEBFD2FD.bcsymbolmap</span><br><span class="line">│   │   ├── C862E8A1-24ED-398A-A8E9-A7384E34EDB1.bcsymbolmap</span><br><span class="line">│   │   ├── SwiftyJSON.framework</span><br><span class="line">│   │   └── SwiftyJSON.framework.dSYM</span><br><span class="line">│   ├── tvOS</span><br><span class="line">│   │   ├── 1ADB9C1F-36CA-3386-BF07-6EE29B5F8081.bcsymbolmap</span><br><span class="line">│   │   ├── SwiftyJSON.framework</span><br><span class="line">│   │   └── SwiftyJSON.framework.dSYM</span><br><span class="line">│   └── watchOS</span><br><span class="line">│       ├── A8A151AB-D15E-3A0B-8A17-BF1A39EC6AB4.bcsymbolmap</span><br><span class="line">│       ├── EA427A42-6D21-3FF4-919F-5E50BF8A5D7B.bcsymbolmap</span><br><span class="line">│       ├── SwiftyJSON.framework</span><br><span class="line">│       └── SwiftyJSON.framework.dSYM</span><br><span class="line">└── Checkouts</span><br><span class="line">    └── SwiftyJSON</span><br><span class="line">        ├── CHANGELOG.md</span><br><span class="line">        ├── Example</span><br><span class="line">        ├── LICENSE</span><br><span class="line">        ├── Package.swift</span><br><span class="line">        ├── README.md</span><br><span class="line">        ├── Source</span><br><span class="line">        ├── SwiftyJSON.podspec</span><br><span class="line">        ├── SwiftyJSON.xcodeproj</span><br><span class="line">        ├── SwiftyJSON.xcworkspace</span><br><span class="line">        ├── Tests</span><br><span class="line">        └── scripts</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>添加生成的文件： 项目 “General” -&gt; “Linked Frameworks and Libraries” -&gt; 将 <code>Carthage/Build/iOS</code> 中的 <code>.framework</code> 文件添加到项目中</p>
</li>
<li>
<p>“Build Phases” -&gt; “+” -&gt; “New Run Script Phase”</p>
<ul>
<li>/bin/sh</li>
<li>/usr/local/bin/carthage copy-frameworks</li>
<li>“Input Files”: $(SRCROOT)/Carthage/Build/iOS/SwiftyJSON.framework</li>
<li>“Output Files”: $(BUILT_PRODUCTS_DIR)/$(FRAMEWORKS_FOLDER_PATH)/SwiftyJSON.framework</li>
</ul>
<p>添加这个 Run Script 的作用是为了让运行时能够找到这个动态库。
还可以将 Carthage 所集成的第三方库生成的符号文件添加到项目中，这样我们在调试的时候，就可以步入第三方库内部的代码：<code>Build Phrases</code> -&gt; <code>New Copy Files Phrase</code>，将 Carthage/Build/iOS 目录中的 <code>SwiftyJSON.framework.dSYM</code> 符号文件拖动进来</p>
</li>
</ol>
<h2>参考</h2>
<ul>
<li><a href="https://www.jianshu.com/p/f024ca2267e3" target="_blank" rel="noopener">解决Cocoapods贼慢问题</a></li>
<li><a href="http://swiftcafe.io/2015/10/25/swift-daily-carthage-package" target="_blank" rel="noopener">Carthage 包管理工具，另一种敏捷轻快的 iOS &amp; MAC 开发体验</a></li>
</ul>
</div><p class="post-tags"><i class="fa fa-tags" aria-hidden="true"></i><a href="/tags/技术/">#技术</a><a href="/tags/iOS/">#iOS</a></p></article></div><div class="post-copyright"><blockquote><p>版权声明：本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">署名-非商业性使用-相同方式共享 | CC BY-NC-SA 4.0 </a>许可协议。</p></blockquote></div><footer><div class="paginator"><a href="/qiwihui-blog-45/" class="prev">PREV</a><a href="/qiwihui-blog-43/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'blog-qiwihui-com';
var disqus_identifier = 'qiwihui-blog-44/';
var disqus_title = 'Cocoapods 和 Carthage 使用笔记';
var disqus_url = 'https://qiwihui.com/qiwihui-blog-44/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//blog-qiwihui-com.disqus.com/count.js" async></script><!-- block copyright--></footer></div><script async src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true,
        processEnvironments: true,
        skipTags: ["script","noscript","style","textarea","code","pre"]
    }
});
</script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-46660488-3",'auto');ga('send','pageview');</script><link rel="stylesheet" href="//cdn.datatables.net/1.10.7/css/jquery.dataTables.min.css" media="screen" type="text/css"><script src="//cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js"></script><script>$(function(){$('.datatable').dataTable( {"order": [[ 0, "desc" ]],"iDisplayLength": -1,"lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]]} );});</script></body></html>