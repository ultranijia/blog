<!DOCTYPE html><html lang><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 网络故障透露中国互联网接入现状 · QIWIHUI</title><meta name="description" content="网络故障透露中国互联网接入现状 - qiwihui"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/nella.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.12/css/all.css" integrity="sha384-G0fIWCsCzJIMAVNQPfjH08cyYaUtMwjJwqiRKxxE/rx96Uroj1BtIQ6MLJuheaO9" crossorigin="anonymous"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
google_ad_client: "ca-pub-8935595858652656",
enable_page_level_ads: true
});
</script><link rel="search" type="application/opensearchdescription+xml" href="https://qiwihui.com/atom.xml" title="QIWIHUI"><script src="//code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/images/avatar.jpg" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">HOME</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item"><a href="/links/" target="_self" class="nav-list-link">LINKS</a></li><!--li.nav-list-item--><!--    a.nav-list-link(class="search" href=url_for("search") target="_self") SEARCH--></ul></header><main class="container"></main><div class="post"><article class="post-block"><h1 class="post-title">网络故障透露中国互联网接入现状</h1><div class="post-info">May 18, 2019<span class="categories"><i class="fa fa-bookmark" aria-hidden="true"></i></span><span>13 min. read</span></div><div class="post-content"><p>原文：<a href="https://blog.thousandeyes.com/internet-outage-reveals-reach-of-chinas-connectivity/" target="_blank" rel="noopener">Internet Outage Reveals Reach of China’s Connectivity</a></p>
<p>太平洋标准时间5月13日中午12点30分（北京时间5月14日凌晨3:30），中国电信经历了持续近5个小时的重大故障，后续效应持续了几个小时。正如在美国对贸易政策的紧张局势加剧之时所做的那样，可能很容易让人联想到对潜在地缘政治动机的猜测。然而，这种猜测忽略了许多人都不知道的关于中国和互联网的一些重要的基本现实。这次中断是深入了解中国互联网连接状况的绝佳机会。</p>
<a id="more"></a>
<iframe width="560" height="315" src="https://www.youtube.com/embed/cBylzjskZho" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h2>我们所见的</h2>
<p>昨天，从下午早些时候开始，我们的全球优势点开始检测到中国电信骨干网上进出中国的互联网流量出现大量数据包丢失。数据包丢失持续数小时，主要影响中国大陆的网络基础设施，但也影响中国电信在新加坡的网络和美国的多个接入点，包括洛杉矶。</p>
<p>在长时间中断的过程中，通过受影响的基础设施的任何流量都被丢弃，这意味着中国境内外的一些互联网用户将遇到连接到各种网站和应用程序的服务中断。中国境内的用户试图访问中国以外的网站会受到影响，同时中国以外的用户尝试连接到中国境内的网站也是如此。</p>
<p>这些不仅仅影响西方网站和服务，许多美国主要网站，如Apple，Amazon，Microsoft，Slack，Workday，SAP等在中断期间都受到了影响。下图显示了中断的附带损害的部分范围。</p>
<p><img src="https://user-images.githubusercontent.com/3297411/57969235-a5393580-79a7-11e9-873f-62a2c42aa573.png" alt="Figure-1-China-Telecom-outage"></p>
<p>图1：受中国电信中断影响的基于云的服务。</p>
<p>在最高峰时，我们检测到因中国电信全球骨干网络状况而中断的100多项服务。我们还检测到中断对地理影响的变化，如下面的两个热图所示，在中断期间的不同点捕获。</p>
<p><img src="https://user-images.githubusercontent.com/3297411/57969242-af5b3400-79a7-11e9-95ee-10ea7a8158f8.png" alt="Figure-2-Geographic-scope-China-Telecom-outage"></p>
<p>图2：中国电信中断的地理范围在中断期间有所不同。</p>
<p>最严重的中断期是在太平洋标准时间12:30开始后的前三个小时内发生的，但许多服务在数小时后继续受到影响。一项特定服务的中断的扩展性质可以在下面的图3中看到。Amazon Web Services的数据包丢失从太平洋标准时间12:30开始飙升，持续约5个小时。下面的路径可视化显示了在17:30-17:45（太平洋标准时间）之间的网络状况，此时前往AWS的流量继续被中国电信路由器丢弃。</p>
<p><img src="https://user-images.githubusercontent.com/3297411/57969353-bb93c100-79a8-11e9-9636-e0afabbcb50f.png" alt="Figure-3-AWS-services-impacted"></p>
<p>图3：中国电信用户在12:30-17:45（太平洋标准时间）之间受影响的AWS服务。</p>
<p>受中断影响的另一家美国服务是Cloudflare的托管DNS服务。例如，WeWork的域名由Cloudflare托管，在下面的路径可视化中，您可以看到尝试访问Cloudflare的DNS服务器的流量（由最右边的绿色节点表示，IP地址为173.245.58.135，这是地理位置位于美国的路由前缀173.245.58.0/24的一部分。）被中国境内的中国电信路由器丢弃。结果是来自中国境内的许多用户无法访问WeWork网站。</p>
<p><img src="https://user-images.githubusercontent.com/3297411/57969270-efbab200-79a7-11e9-9013-05196425426d.png" alt="Figure-4-Cloudflare-DNS-resolution"></p>
<p>图4：Cloudflare的托管DNS服务受到影响，阻止了WeWork域的DNS解析。</p>
<h2>中国是深度互联的</h2>
<p>中断现已解决，但在ThousandEyes，我们相信每次互联网停运都是一次学习机会，这也不例外。这里有两个要点可能一般不太清楚。</p>
<p>首先，大多数人认为“<a href="https://blog.thousandeyes.com/deconstructing-great-firewall-china/" target="_blank" rel="noopener">长城防火墙</a>”是一套统一管理的规则，使中国用户与全球其他地方隔离。他们想象一方面是中国庞大的用户和为他们提供服务的网络基础设施，另一方面，互联网的其余部分。但现实情况是，中国与外部网站和服务的联系非常紧密──至少是那些服务于商业利益的网站和服务。</p>
<p>中国互联网服务提供商（ISP）的标准操作程序允许访问大多数西方基于云的业务服务。通过允许国内和外国公司更有效地开展业务，从中国境内进入这些类型的网站符合中国的利益。通俗地说，您可以从中国境内访问许多美国服务。</p>
<p>其次，大多数人也可能没有意识到中国的互联网服务提供商将拥有全球性的存在。但是，如上图2所示，中国电信控制和管理的基础设施范围远远超出了中国的地理边界。该提供商还维护全球互联，与全球许多地方的服务提供商保持联系。</p>
<p>那些回忆起<a href="https://blog.thousandeyes.com/internet-vulnerability-takes-down-google/" target="_blank" rel="noopener">去年影响谷歌服务的BGP路由泄漏</a>的读者，可能还记得中国电信在那一集中的客串。中国电信与负责尼日利亚工厂路线泄漏的ISP（MainOne）保持联系。中国电信未能过滤通往谷歌的广告路线（而是将其传播给其他同行），导致一些用户试图访问谷歌的服务中断。</p>
<h2>互联网无处不在</h2>
<p>无论互联网在哪里，无论是在一个自由的民主国家，还是在高度国家控制的环境中，它都是根本无法预测的。这是由于它被构建为自愿互连但单独管理的网络，基础技术的自动化性质（例如BGP路由）以及完全缺乏集中式运营管理的的集合。</p>
<p>当互联网的某个部分出现糟糕的事情时，尤其是在像中国这样的后续国家，互联网的其他部分会产生连锁反应。在这种情况下，超过一百种商业服务受到影响，毫无疑问，因此产生了生产力和收入损失。</p>
<p>当你考虑互联网是多么不可预测的时候，今天的企业依赖互联网的程度相当惊人。这是最终的不受控制的环境。这就引出了一个问题，如果你无法直接控制它，你是否拥有尽可能最好地管理它的可见性？</p>
<h2>现在关于那个猜测</h2>
<p>因为ThousandEyes本质上是（不断变化的）互联网的实时地图，我们能够跟踪互联网中断及其全球影响，无论是在中国，<a href="https://blog.thousandeyes.com/yandex-packet-loss-ddos-or-russian-firewall/" target="_blank" rel="noopener">俄罗斯</a>还是其他地方，但我们不能也不会推测这种网络事件的地缘政治和可能的动机（如果有的话）。</p>
<p>然而，值得注意的是，中国的互联网服务提供商非常精通对进出网络的流量实施细粒度控制。如果有意展示禁用美国应用程序和服务的能力，那么从技术角度来看，它肯定没有得到很明确的体现。毕竟，被破坏的网站和服务是不分青红皂白的，影响到中国境内外的人。</p>
<h2>立即获得可见性</h2>
<p>主要的互联网中断是企业团队关注企业所依赖的大量外部依赖关系的警钟。如果你无法深入了解四面墙以外的应用和网络层条件，那么当你的云和互联网生态系统发生不可预测的事情时，您将陷入困境。</p>
</div><p class="post-tags"><i class="fa fa-tags" aria-hidden="true"></i><a href="/tags/技术/">#技术</a><a href="/tags/翻译/">#翻译</a><a href="/tags/GFW/">#GFW</a></p></article></div><div class="post-copyright"><blockquote><p>版权声明：本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">署名-非商业性使用-相同方式共享 | CC BY-NC-SA 4.0 </a>许可协议。</p></blockquote></div><footer><div class="paginator"><a href="/qiwihui-blog-72/" class="prev">PREV</a><a href="/qiwihui-blog-70/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'blog-qiwihui-com';
var disqus_identifier = 'qiwihui-blog-71/';
var disqus_title = '网络故障透露中国互联网接入现状';
var disqus_url = 'https://qiwihui.com/qiwihui-blog-71/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//blog-qiwihui-com.disqus.com/count.js" async></script><!-- block copyright--></footer></div><script async src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true,
        processEnvironments: true,
        skipTags: ["script","noscript","style","textarea","code","pre"]
    }
});
</script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-46660488-3",'auto');ga('send','pageview');</script><link rel="stylesheet" href="//cdn.datatables.net/1.10.7/css/jquery.dataTables.min.css" media="screen" type="text/css"><script src="//cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js"></script><script>$(function(){$('.datatable').dataTable( {"order": [[ 0, "desc" ]],"iDisplayLength": -1,"lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]]} );});</script></body></html>