<!DOCTYPE html><html lang><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 在iOS-Swift项目中集成CppJieba分词 · QIWIHUI</title><meta name="description" content="在iOS-Swift项目中集成CppJieba分词 - qiwihui"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/nella.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.12/css/all.css" integrity="sha384-G0fIWCsCzJIMAVNQPfjH08cyYaUtMwjJwqiRKxxE/rx96Uroj1BtIQ6MLJuheaO9" crossorigin="anonymous"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
google_ad_client: "ca-pub-8935595858652656",
enable_page_level_ads: true
});
</script><link rel="search" type="application/opensearchdescription+xml" href="https://qiwihui.com/atom.xml" title="QIWIHUI"><script src="//code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/images/avatar.jpg" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">HOME</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item"><a href="/links/" target="_self" class="nav-list-link">LINKS</a></li><!--li.nav-list-item--><!--    a.nav-list-link(class="search" href=url_for("search") target="_self") SEARCH--></ul></header><main class="container"></main><div class="post"><article class="post-block"><h1 class="post-title">在iOS-Swift项目中集成CppJieba分词</h1><div class="post-info">Jan 14, 2019<span class="categories"><i class="fa fa-bookmark" aria-hidden="true"></i></span><a href="/categories/技术/" class="post-category">#技术</a><span>10 min. read</span></div><div class="post-content"><p>在垃圾短信过滤应用 <code>SMSFilters</code> 中，需要使用 <code>Jieba</code> 分词库来対短信进行分词，然后使用 <code>TF-IDF</code> 来进行处理` 分词库是 C++ 写的，这就意味着需要在Swift中集成 C++ 库。
在官方文档 “<a href="https://developer.apple.com/library/prerelease/ios/documentation/Swift/Conceptual/BuildingCocoaApps/index.html" target="_blank" rel="noopener">Using Swift with Cocoa and Objective-C</a>” 中，Apple只是介绍了怎么将 Swift 代码跟 Objective-C 代码做整合，但是没有提C++，后来在官方文档中看到了这样一段话：</p>
<blockquote>
<p>You cannot import C++ code directly into Swift. Instead, create an Objective-C or C wrapper for C++ code.</p>
</blockquote>
<p>也就是不能直接导入 C++ 代码，但是可以使用 Objective-C 或者 C 对 C++ 进行封装。所以项目中使用 Objective-C 做封装，然后在 Swift 中调用，下面就是这个过程的实践，Demo 代码见 <a href="https://github.com/qiwihui/SwiftJiebaDemo" target="_blank" rel="noopener">SwiftJiebaDemo</a>。</p>
<a id="more"></a>
<h2>整合过程</h2>
<p>分成三步：</p>
<ol>
<li>引入C++文件；</li>
<li>用 Objective-C 封装；</li>
<li>在 Swift 中 调用 Objective-C；</li>
</ol>
<h3>引入C++文件</h3>
<p>Demo中使用的是&quot;结巴&quot;中文分词的 C++ 版本 <a href="https://github.com/yanyiwu/cppjieba" target="_blank" rel="noopener">yanyiwu/cppjieba</a>。将其中的 <code>include/cppjieba</code> 和依赖 <code>limonp</code> 合并，并加入 <code>dict</code> 中的 <code>hmm_model</code> 和 <code>jiaba.dict</code> 作为基础数据，并暴露 <code>JiebaInit</code> 和  <code>JiebaCut</code> 接口：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Segmentor.cpp</span></span><br><span class="line"><span class="comment">//  iosjieba</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by yanyiwu on 14/12/24.</span></span><br><span class="line"><span class="comment">//  Copyright (c) 2014年 yanyiwu. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Segmentor.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cppjieba;</span><br><span class="line"></span><br><span class="line">cppjieba::MixSegment * globalSegmentor;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">JiebaInit</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp; dictPath, <span class="keyword">const</span> <span class="built_in">string</span>&amp; hmmPath, <span class="keyword">const</span> <span class="built_in">string</span>&amp; userDictPath)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(globalSegmentor == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        globalSegmentor = <span class="keyword">new</span> MixSegment(dictPath, hmmPath, userDictPath);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; __FILE__ &lt;&lt; __LINE__ &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">JiebaCut</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span>&amp; sentence, <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; words)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    assert(globalSegmentor);</span><br><span class="line">    globalSegmentor-&gt;Cut(sentence, words);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; __FILE__ &lt;&lt; __LINE__ &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; words &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以及</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Segmentor.h</span></span><br><span class="line"><span class="comment">//  iosjieba</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by yanyiwu on 14/12/24.</span></span><br><span class="line"><span class="comment">//  Copyright (c) 2014年 yanyiwu. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __iosjieba__Segmentor__</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __iosjieba__Segmentor__</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"cppjieba/MixSegment.hpp"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> cppjieba::MixSegment * globalSegmentor;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">JiebaInit</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; dictPath, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; hmmPath, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; userDictPath)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">JiebaCut</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; sentence, <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt;&amp; words)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">/* defined(__iosjieba__Segmentor__) */</span></span></span><br></pre></td></tr></table></figure>
<p>目录如下：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ tree iosjieba</span><br><span class="line">iosjieba</span><br><span class="line">├── Segmentor.cpp</span><br><span class="line">├── Segmentor.h</span><br><span class="line">├── cppjieba</span><br><span class="line">│   ├── DictTrie.hpp</span><br><span class="line">│   ├── FullSegment.hpp</span><br><span class="line">│   ├── HMMModel.hpp</span><br><span class="line">│   ├── HMMSegment.hpp</span><br><span class="line">│   ├── Jieba.hpp</span><br><span class="line">│   ├── KeywordExtractor.hpp</span><br><span class="line">│   ├── MPSegment.hpp</span><br><span class="line">│   ├── MixSegment.hpp</span><br><span class="line">│   ├── PosTagger.hpp</span><br><span class="line">│   ├── PreFilter.hpp</span><br><span class="line">│   ├── QuerySegment.hpp</span><br><span class="line">│   ├── SegmentBase.hpp</span><br><span class="line">│   ├── SegmentTagged.hpp</span><br><span class="line">│   ├── TextRankExtractor.hpp</span><br><span class="line">│   ├── Trie.hpp</span><br><span class="line">│   ├── Unicode.hpp</span><br><span class="line">│   └── limonp</span><br><span class="line">│       ├── ArgvContext.hpp</span><br><span class="line">│       ├── BlockingQueue.hpp</span><br><span class="line">│       ├── BoundedBlockingQueue.hpp</span><br><span class="line">│       ├── BoundedQueue.hpp</span><br><span class="line">│       ├── Closure.hpp</span><br><span class="line">│       ├── Colors.hpp</span><br><span class="line">│       ├── Condition.hpp</span><br><span class="line">│       ├── Config.hpp</span><br><span class="line">│       ├── FileLock.hpp</span><br><span class="line">│       ├── ForcePublic.hpp</span><br><span class="line">│       ├── LocalVector.hpp</span><br><span class="line">│       ├── Logging.hpp</span><br><span class="line">│       ├── Md5.hpp</span><br><span class="line">│       ├── MutexLock.hpp</span><br><span class="line">│       ├── NonCopyable.hpp</span><br><span class="line">│       ├── StdExtension.hpp</span><br><span class="line">│       ├── StringUtil.hpp</span><br><span class="line">│       ├── Thread.hpp</span><br><span class="line">│       └── ThreadPool.hpp</span><br><span class="line">└── iosjieba.bundle</span><br><span class="line">    └── dict</span><br><span class="line">        ├── hmm_model.utf8</span><br><span class="line">        ├── jieba.dict.small.utf8</span><br><span class="line">        └── user.dict.utf8</span><br></pre></td></tr></table></figure>
<p>接下来开始在项目中集成。首先创建一个空项目 <code>iOSJiebaDemo</code>，将 <code>iosjieba</code> 加入项目中。</p>
<table>
<thead>
<tr>
<th style="text-align:center">单页应用</th>
<th style="text-align:center">SwiftJiebaDemo</th>
<th style="text-align:center">添加 SwiftJiebaDemo</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="https://user-images.githubusercontent.com/3297411/51162445-26d16780-18d1-11e9-9385-123b8b64fbb9.png" alt="create-single-view-app"></td>
<td style="text-align:center"><img src="https://user-images.githubusercontent.com/3297411/51162258-8713d980-18d0-11e9-9c9e-ffec10c8d2dc.png" alt="swift-jieba-demo-1"></td>
<td style="text-align:center"><img src="https://user-images.githubusercontent.com/3297411/51162266-8f6c1480-18d0-11e9-922e-a5b728e85eb9.png" alt="swift-jieba-demo-2"></td>
</tr>
</tbody>
</table>
<p>添加 iosjieba:</p>
<p><img src="https://user-images.githubusercontent.com/3297411/51162030-ae1ddb80-18cf-11e9-8e2f-8692e2e7f915.png" alt="iosjieba-1"></p>
<p>见代码： <a href="https://github.com/qiwihui/SwiftJiebaDemo/commit/caeb6c2f9fb005a9bc518ee67890814481676807" target="_blank" rel="noopener">https://github.com/qiwihui/SwiftJiebaDemo/commit/caeb6c2f9fb005a9bc518ee67890814481676807</a></p>
<h3>C++ 到 Objective-C 封装</h3>
<p>这个过程是将 C++ 的接口进行 Objective-C 封装，向 Swift 暴露。这个封装只暴露了 <code>objcJiebaInit</code> 和 <code>objcJiebaCut</code> 两个接口。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">//</span><br><span class="line">//  iosjiebaWrapper.h</span><br><span class="line">//  SMSFilters</span><br><span class="line">//</span><br><span class="line">//  Created by Qiwihui on 1/14/19.</span><br><span class="line">//  Copyright © 2019 qiwihui. All rights reserved.</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line"></span><br><span class="line">@interface JiebaWrapper : NSObject</span><br><span class="line"></span><br><span class="line">- (void) objcJiebaInit: (NSString *) dictPath forPath: (NSString *) hmmPath forDictPath: (NSString *) userDictPath;</span><br><span class="line">- (void) objcJiebaCut: (NSString *) sentence toWords: (NSMutableArray *) words;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">//</span><br><span class="line">//  iosjiebaWrapper.mm</span><br><span class="line">//  iOSJiebaTest</span><br><span class="line">//</span><br><span class="line">//  Created by Qiwihui on 1/14/19.</span><br><span class="line">//  Copyright © 2019 Qiwihui. All rights reserved.</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line">#import &quot;iosjiebaWrapper.h&quot;</span><br><span class="line">#include &quot;Segmentor.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation JiebaWrapper</span><br><span class="line"></span><br><span class="line">- (void) objcJiebaInit: (NSString *) dictPath forPath: (NSString *) hmmPath forDictPath: (NSString *) userDictPath &#123;</span><br><span class="line"></span><br><span class="line">    const char *cDictPath = [dictPath UTF8String];</span><br><span class="line">    const char *cHmmPath = [hmmPath UTF8String];</span><br><span class="line">    const char *cUserDictPath = [userDictPath UTF8String];</span><br><span class="line">    </span><br><span class="line">    JiebaInit(cDictPath, cHmmPath, cUserDictPath);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void) objcJiebaCut: (NSString *) sentence toWords: (NSMutableArray *) words &#123;</span><br><span class="line">    </span><br><span class="line">    const char* cSentence = [sentence UTF8String];</span><br><span class="line">    </span><br><span class="line">    std::vector&lt;std::string&gt; wordsList;</span><br><span class="line">    for (int i = 0; i &lt; [words count];i++)</span><br><span class="line">    &#123;</span><br><span class="line">        wordsList.push_back(wordsList[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    JiebaCut(cSentence, wordsList);</span><br><span class="line">    </span><br><span class="line">    [words removeAllObjects];</span><br><span class="line">    std::for_each(wordsList.begin(), wordsList.end(), [&amp;words](std::string str) &#123;</span><br><span class="line">        id nsstr = [NSString stringWithUTF8String:str.c_str()];</span><br><span class="line">        [words addObject:nsstr];</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>见代码： <a href="https://github.com/qiwihui/SwiftJiebaDemo/commit/7d196bb2c33280a4f419be21b47961a521618221" target="_blank" rel="noopener">https://github.com/qiwihui/SwiftJiebaDemo/commit/7d196bb2c33280a4f419be21b47961a521618221</a></p>
<h3>Objective-C 到 Swift</h3>
<p>在 Swift 中调用 Objecttive-C 的接口，这个在官方文档和许多博客中都有详细介绍。</p>
<ol>
<li>加入 <code>{project_name}-Bridging-Header.h</code> 头文件，即 <code>SwiftJiebaDemo_Bridging_Header_h</code>，引入之前封装的头文件，并在 <code>Targets -&gt; Build Settings -&gt; Objective-C Bridging Header</code> 中设置头文件路径 <code>SwiftJiebaDemo/SwiftJiebaDemo_Bridging_Header_h</code>。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">//</span><br><span class="line">//  SwiftJiebaDemo-Bridging-Header.h</span><br><span class="line">//  SwiftJiebaDemo</span><br><span class="line">//</span><br><span class="line">//  Created by Qiwihui on 1/15/19.</span><br><span class="line">//  Copyright © 2019 Qiwihui. All rights reserved.</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">#ifndef SwiftJiebaDemo_Bridging_Header_h</span><br><span class="line">#define SwiftJiebaDemo_Bridging_Header_h</span><br><span class="line"></span><br><span class="line">#import &quot;iosjiebaWrapper.h&quot;</span><br><span class="line"></span><br><span class="line">#endif /* SwiftJiebaDemo_Bridging_Header_h */</span><br></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/3297411/51162068-d60d3f00-18cf-11e9-951f-ec5c20e984dc.png" alt="bridging-header-2"></p>
<ol start="2">
<li>将使用到 C++ 的 Objective-C 文件修改为 Objective-C++ 文件，即 将 <code>.m</code> 改为 <code>.mm</code>: <code>iosjiebaWrapper.m</code> 改为 <code>iosjiebaWrapper.mm</code>。</li>
</ol>
<p>见代码：<a href="https://github.com/qiwihui/SwiftJiebaDemo/commit/94852b1357b0a0a4b2e8b92384fbdb1b16c80ed8" target="_blank" rel="noopener">https://github.com/qiwihui/SwiftJiebaDemo/commit/94852b1357b0a0a4b2e8b92384fbdb1b16c80ed8</a></p>
<h3>使用</h3>
<p>使用时需要先初始化 <code>Jiaba</code>分词，然后再进行分词。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Classifier</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>() &#123;</span><br><span class="line">        <span class="keyword">let</span> dictPath = <span class="type">Bundle</span>.main.resourcePath!+<span class="string">"/iosjieba.bundle/dict/jieba.dict.small.utf8"</span></span><br><span class="line">        <span class="keyword">let</span> hmmPath = <span class="type">Bundle</span>.main.resourcePath!+<span class="string">"/iosjieba.bundle/dict/hmm_model.utf8"</span></span><br><span class="line">        <span class="keyword">let</span> userDictPath = <span class="type">Bundle</span>.main.resourcePath!+<span class="string">"/iosjieba.bundle/dict/user.dict.utf8"</span></span><br><span class="line"></span><br><span class="line">        <span class="type">JiebaWrapper</span>().objcJiebaInit(dictPath, forPath: hmmPath, forDictPath: userDictPath);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">tokenize</span><span class="params">(<span class="number">_</span> message:String)</span></span> -&gt; [<span class="type">String</span>] &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"tokenize..."</span>)</span><br><span class="line">        <span class="keyword">let</span> words = <span class="type">NSMutableArray</span>()</span><br><span class="line">        <span class="type">JiebaWrapper</span>().objcJiebaCut(message, toWords: words)</span><br><span class="line">        <span class="keyword">return</span> words <span class="keyword">as</span>! [<span class="type">String</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>控制台输出结果：</p>
<p><img src="https://user-images.githubusercontent.com/3297411/51162211-5a5fc200-18d0-11e9-9849-c86d2fbf683d.png" alt="result"></p>
<p>可以看到，测试用例 <code>小明硕士毕业于中国科学院计算所，后在日本京都大学深造</code> 经过分词后为
<code>〔拼音〕[&quot;小明&quot;, &quot;硕士&quot;, &quot;毕业&quot;, &quot;于&quot;, &quot;中国科学院&quot;, &quot;计算所&quot;, &quot;，&quot;, &quot;后&quot;, &quot;在&quot;, &quot;日本&quot;, &quot;京都大学&quot;, &quot;深造&quot;]</code>，完成集成。</p>
<p>见代码： <a href="https://github.com/qiwihui/SwiftJiebaDemo/commit/bc42e1312dff6a9f7171cc69403136bc8a82204c" target="_blank" rel="noopener">https://github.com/qiwihui/SwiftJiebaDemo/commit/bc42e1312dff6a9f7171cc69403136bc8a82204c</a></p>
<h2>遇到的问题</h2>
<p>由于自己对于编译链接原理不了解，以及是 iOS 开发初学，因此上面的这个过程中遇到了很多问题，耗时两周才解决，故将遇到的一些问题记录于此，以便日后。</p>
<ol start="0">
<li><code>&quot;cassert&quot; file not found</code></li>
</ol>
<p>将 <code>.m</code> 改为 <code>.mm</code> 即可。</p>
<ol>
<li><code>compiler not finding &lt;tr1/unordered_map&gt;</code></li>
</ol>
<p>设置 <code>C++ Standard Library</code> 为 <code>LLVM libc++</code></p>
<p><img src="https://user-images.githubusercontent.com/3297411/51225371-3f02be80-1985-11e9-9705-32de84b5dfad.png" alt="llvm"></p>
<p>参考： <a href="https://stackoverflow.com/questions/42030598/mac-c-compiler-not-finding-tr1-unordered-map" target="_blank" rel="noopener">mac c++ compiler not finding &lt;tr1/unordered_map&gt;</a></p>
<ol start="2">
<li><code>warning: include path for stdlibc++ headers not found; pass '-std=libc++' on the command line to use the libc++ standard library instead [-Wstdlibcxx-not-found]</code></li>
</ol>
<p><code>Build Setting -&gt; C++ Standard Library -&gt; libstdc++</code> 修改为 <code>Build Setting -&gt; C++ Standard Library -&gt; libc++</code></p>
<ol start="3">
<li><code>use of unresolved identifier</code></li>
</ol>
<p>这个问题在于向项目中加入文件时，<code>Target Membership</code> 设置不正确导致。需要将对于使用到的 Target 都勾上。</p>
<p>相关参考： <a href="https://learnappmaking.com/unresolved-identifier-understanding-xcode/" target="_blank" rel="noopener">Understanding The “Use of Unresolved Identifier” Error In Xcode</a></p>
<h2>参考</h2>
<ul>
<li><a href="https://stackoverflow.com/users/218152/swiftarchitect" target="_blank" rel="noopener">SwiftArchitect</a> 对问题 “Can I have Swift, Objective-C, C and C++ files in the same Xcode project?
” 的<a href="https://stackoverflow.com/a/32546879/3218128" target="_blank" rel="noopener">回答</a></li>
<li><a href="https://stackoverflow.com/users/218152/swiftarchitect" target="_blank" rel="noopener">SwiftArchitect</a> 对问题 “Can I mix Swift with C++? Like the Objective - C .mm files” 的<a href="https://stackoverflow.com/a/32554229/3218128" target="_blank" rel="noopener">回答</a></li>
<li><a href="https://blog.voidmain.guru/2014/07/01/integrating-swift-with-c-plus-plus/" target="_blank" rel="noopener">在Swift代码中整合C++类库</a></li>
</ul>
</div><p class="post-tags"><i class="fa fa-tags" aria-hidden="true"></i><a href="/tags/技术/">#技术</a><a href="/tags/iOS/">#iOS</a></p></article></div><div class="post-copyright"><blockquote><p>版权声明：本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">署名-非商业性使用-相同方式共享 | CC BY-NC-SA 4.0 </a>许可协议。</p></blockquote></div><footer><div class="paginator"><a href="/qiwihui-blog-46/" class="prev">PREV</a><a href="/qiwihui-blog-44/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'blog-qiwihui-com';
var disqus_identifier = 'qiwihui-blog-45/';
var disqus_title = '在iOS-Swift项目中集成CppJieba分词';
var disqus_url = 'https://qiwihui.com/qiwihui-blog-45/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//blog-qiwihui-com.disqus.com/count.js" async></script><!-- block copyright--></footer></div><script async src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true,
        processEnvironments: true,
        skipTags: ["script","noscript","style","textarea","code","pre"]
    }
});
</script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-46660488-3",'auto');ga('send','pageview');</script><link rel="stylesheet" href="//cdn.datatables.net/1.10.7/css/jquery.dataTables.min.css" media="screen" type="text/css"><script src="//cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js"></script><script>$(function(){$('.datatable').dataTable( {"order": [[ 0, "desc" ]],"iDisplayLength": -1,"lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]]} );});</script></body></html>